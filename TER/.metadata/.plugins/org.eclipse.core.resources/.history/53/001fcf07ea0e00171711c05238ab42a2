// automatically generated by Xtext
grammar org.xtext.ter_metamodel.ecfdl.ECFDL with org.eclipse.xtext.common.Terminals

generate ecfd "http://www.example.org/ter_metamodel" 
import "http://www.eclipse.org/emf/2002/Ecore" as ecore

File returns File:
	'listEcfd' '{'ecfd+= Ecfd ( "," ecfd+=Ecfd)*'}'
;

Ecfd returns Ecfd:
	{Ecfd}
	'Ecfd' ':' name=ID
	'{'
		('boxes' '{' boxes+=Element  (","boxes+=Element)*'}')
		('groups' '{' groups+=Element ( "," boxes+=Element)*'}')?
		 
		('mutex' '{' (mutex+=Mutex ( "," mutex+=Mutex)*)? '}')?
	'}';


Element returns Element:
	Box | GroupBox;


Mutex returns Mutex:
	'Mutex' ':' name=ID
	'{'
		'boxes' '(' box+=[Box|ID] ( "," box+=[Box|ID])+ ')'  // modification de '*' pour un '+'
	'}';

Box returns Box:
	{Box}
	'Box' ':' name=ID
	'{'
		(Root?='Root')?
		('superBox' '(' superBox+=[Box|ID] ( "," superBox+=[Box|ID])* ')' )?
		('groupbox' '(' groupbox+=[GroupBox|ID] ( "," groupbox+=[GroupBox|ID])* ')' )?
		('motherOf'  '(' (childBox+=[Box|ID]) ( "," childBox+=[Box|ID])* ')' )?
		('motherOfGroup' '(' (childGroup+=[GroupBox|ID]) ( "," (childGroup+=[GroupBox|ID]))*  ')')?
		('mutex' '(' mutex+=[Mutex|ID] ( "," mutex+=[Mutex|ID])* ')' )?
		('features' '(' feature+=Feature ( "," feature+=Feature)* ')' )?  
	'}';

GroupBox returns GroupBox:
	'GroupBox' ':' name=ID
	'{'
		(Exclusif?='Exclusif')?
		'superBox' '(' superBox+=[Box|ID] ')'
		'boxes' '(' box+=[Box|ID] ( "," box+=[Box|ID])+ ')' // modification de '*' pour un '+'
	'}';

Feature returns Feature:
	{Feature}
	
	//Suppression de tous les aspects syntaxiques de feature afin de simplifier la syntaxe des boites
	
	//'Feature'
	// '{'
		(/*'Nom'*/ name=EString)?
	//'}'
	;

EString returns ecore::EString:
	STRING | ID;

EBoolean returns ecore::EBoolean:
	'true' | 'false';